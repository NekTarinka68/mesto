(()=>{"use strict";var e={d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{V:()=>a,O:()=>l});class t{constructor(e,t,s){this._data=e,this._templateSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}createCard(){return this._element=this._getTemplate(),this._elementTitle=this._element.querySelector(".element__title"),this._elementImage=this._element.querySelector(".element__pictures"),this._elementTitle.textContent=this._data.name,this._elementImage.src=this._data.link,this._elementImage.alt=this._data.name,this._setEventListeners(),this._element}_setEventListeners(){this._like=this._element.querySelector(".element__like"),this._like.addEventListener("click",(()=>{this._activeLike()})),this._element.querySelector(".element__delete").addEventListener("click",(()=>{this._deleteCard()})),this._elementImage.addEventListener("click",(()=>{this._handleCardClick(this._data.link,this._data.name)}))}_deleteCard(){this._element.remove(),this._element=null}_activeLike(){this._like.classList.toggle("element__like_active")}}class s{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.classList.add(this._errorClass),s.textContent=t}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(e,t){this._setEventListeners(e,t)}}class n{constructor(e){this._popup=document.querySelector(e),this._closePopup=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_is-active"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_is-active"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closePopup.addEventListener("click",(()=>this.close())),this._popup.addEventListener("mousedown",(e=>this._handleClickByOverlay(e)))}_handleClickByOverlay(e){e.target===this._popup&&this.close()}}class i extends n{constructor({popupSelector:e,handleFormSubmit:t}){super(e),this._handleFormSubmit=t,this._popupForm=this._popup.querySelector(".popup__form"),this._inputList=this._popupForm.querySelectorAll(".popup__input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){this._popupForm.reset(),super.close()}}const r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},o=document.querySelector(".profile__button"),p=document.querySelector(".popup__form_type-profile"),l=document.querySelector(".popup__input_type_name"),a=document.querySelector(".popup__input_type_info"),_=document.querySelector(".profile__name"),u=document.querySelector(".profile__description"),c=new s(r,p),d=new class{constructor(e,t){this._nameProfile=e,this._descriptionProfile=t}getUserInfo(){return this._userInfo={inputName:this._nameProfile.textContent,inputInfo:this._descriptionProfile.textContent},this._userInfo}setUserInfo(){this._nameProfile.textContent=l.value,this._descriptionProfile.textContent=a.value}}(_,u),h=document.querySelector(".elements"),m=document.querySelector(".profile__button-pic"),v=document.querySelector(".popup__form_type-card"),y=new s(r,v),S=document.querySelector(".popup_type-img"),f=S.querySelector(".popup__image"),E=S.querySelector(".popup__caption"),k=new i({popupSelector:".popup_type_edit-profile",handleFormSubmit:e=>d.setUserInfo(e)});k.setEventListeners(),o.addEventListener("click",(()=>{const e=d.getUserInfo();l.value=e.inputName,a.value=e.inputInfo,c.resetValidation(),k.open()}));const C=new i({popupSelector:".popup_type_add-card",handleFormSubmit:e=>{const t=L(e);g.addItems(t)}});function L(e){return new t(e,"#template",b).createCard()}C.setEventListeners(),m.addEventListener("click",(()=>{v.reset(),y.resetValidation(),C.open()}));const g=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._containerSelector=s}addItems(e){this._containerSelector.prepend(e)}renderItems(){this._items.forEach((e=>this._renderer(e)))}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{const t=L(e);g.addItems(t)}},h);g.renderItems();const I=new class extends n{constructor(e){super(e),this._popupImg=this._popup.querySelector(".popup__image"),this._captionPopup=this._popup.querySelector(".popup__caption")}open({link:e,name:t}){super.open(),this._popupImg.src=e,this._popupImg.alt=t,this._captionPopup.textContent=t}}(".popup_type-img");function b(e,t){f.src=e,f.alt=t,E.textContent=t,I.open({link:e,name:t})}I.setEventListeners(),y.enableValidation(),c.enableValidation()})();